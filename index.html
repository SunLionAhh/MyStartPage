<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>蓝白起始页</title>
    <link rel="shortcut icon" href="./image/coffee_favicon.ico" type="image/x-icon">
    <!-- 引入样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
<div id="app">
    <el-container>
        <el-header>
            <p class="clock_time">{{ time }}</p>
        </el-header>
        <el-main>
            <div class="demo-input-suffix">
                <el-input placeholder="请输入搜索内容" v-model="search_input" class="input-with-select"
                          @keydown.enter.native="keydown_search(select,search_input)">
                    <el-select v-model="select" slot="prepend" placeholder="请选择">
                        <el-option label="Baidu" value="1"></el-option>
                        <el-option label="Google" value="2"></el-option>
                    </el-select>
                    <el-button slot="append" icon="el-icon-search"
                               @click="button_search(select,search_input)"></el-button>
                </el-input>
            </div>
        </el-main>
        <el-footer>
            <div>
                © 2022 <a href="https://maorx.cn/">蓝白咖啡</a>
                丨 <a href="https://beian.miit.gov.cn">闽ICP备16025935号-1</a>
            </div>
        </el-footer>
    </el-container>
</div>

</body>
<!-- 开发环境版本，包含了有帮助的命令行警告 -->
<script src="./js/vue.js"></script>
<!-- 引入组件库 -->
<script src="./js/element-ui.js"></script>
<script>
    new Vue({
        el: '#app',
        data() {
            return {
                time: "",
                search_input: '',
                select: '1',
            };
        },
        methods: {
            getTime() {
                setInterval(() => {
                    this.$data.time = new Date().toLocaleTimeString("Chinese", {hour: "2-digit", minute: "2-digit"});
                }, 1000)
            },
            setCookie(cname) {
                document.cookie = "select=" + cname;
            },
            getCookie(cname) {
                let name = cname + "=";
                let ca = document.cookie.split(';');
                for (let i = 0; i < ca.length; i++) {
                    let c = ca[i].trim();
                    if (c.indexOf(name) === 0) return c.substring(name.length, c.length);
                }
                return "";
            },
            common_search_option(select, search_input) {
                // todo 强调！注意: select === 1 这样的写法是错误的！！！ 定义的时候写的就是字符串 select: '1'
                if (select === "1") {
                    window.open("https://www.baidu.com/s?wd=" + search_input);
                } else if (select === "2") {
                    window.open("https://www.google.com/search?q=" + search_input);
                }
                this.setCookie(select);
            },
            keydown_search(select, search_input) {
                this.common_search_option(select, search_input);
            },
            button_search(select, search_input) {
                this.common_search_option(select, search_input);
            },

        },
        created() {
            this.$data.select = document.cookie.length === 0 ? "1" : this.getCookie("select");
            this.getTime();
        },
    })
</script>
</html>
